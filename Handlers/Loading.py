from Engine.Filter import Instance
from Engine.Penguin import Penguin

@Instance.register("/ready")
def readyhandler(client, arg):
    print(client)
    load_sprites(client)
    client.sendLine("[UI_CROSSWORLDSWFREF]|101|0|WindowManagerSwf|0|0|0|0|0|http://media.localhost/game/mpassets//minigames/cjsnow/en_US/deploy/swf/windowManager/windowmanager.swf|#receivedFromFramework")
    client.sendLine("[UI_ALIGN]|101|0|0|center|scale_none")
    client.sendLine("[W_PLACE]|0:0|1|0")
    client.sendLine("[P_MAPBLOCK]|t|1|1|iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAAAAACyOJm3AAAADklEQVQImWNghgEGIlkADWEAiDEh28IAAAAASUVORK5CYII=")
    client.sendLine("[P_MAPBLOCK]|h|1|1|iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAAAAADfm1AaAAAADklEQVQImWOohwMG8pgA1rMdxRJRFewAAAAASUVORK5CYII=")
    client.sendLine("[P_ZOOMLIMIT]|-1.000000|-1.000000")
    client.sendLine("[P_RENDERFLAGS]|0|48")
    client.sendLine("[P_SIZE]|9|5")
    client.sendLine("[P_VIEW]|5")
    client.sendLine("[P_START]|5|2.5|0")
    client.sendLine("[P_LOCKVIEW]|0")
    client.sendLine("[P_TILESIZE]|100")
    client.sendLine("[P_ELEVSCALE]|0.031250")
    client.sendLine("[P_RELIEF]|1")
    client.sendLine("[P_LOCKSCROLL]|1|0|0|0")
    client.sendLine("[P_HEIGHTMAPSCALE]|0.5|0")
    client.sendLine("[P_HEIGHTMAPDIVISIONS]|1")
    client.sendLine("[P_CAMERA3D]|0.000000|0.000000|0.000000|0.000000|0.000000|0.000000|0.000000|0.000000|0|0.000000|0.000000|0.000000|0.000000|0.000000|0.000000|864397819904.000000|0.000000|0|0")
    client.sendLine("[UI_BGCOLOR]|255|255|255")
    client.sendLine("[P_DRAG]|0")
    client.sendLine("[P_CAMLIMITS]|0|0|0|0")
    client.sendLine("[P_LOCKRENDERSIZE]|0|1024|768")
    client.sendLine("[P_LOCKOBJECTS]|0")
    client.sendLine("[UI_BGSPRITE]|-1:-1|0|0.000000|0.000000")
    client.sendLine("[P_TILE]|0||0|0|1|0:2|Empty Tile|0|0|0|0:7940006")
    client.sendLine("[P_TILE]|1||0|0|1|0:2|blankblue|0|0|0|0:7940007")
    client.sendLine("[P_TILE]|2||0|0|1|0:3|blankgreen|0|0|0|0:7940008")
    client.sendLine("[P_TILE]|3||0|0|1|0:4|blankgrey|0|0|0|0:7940009")
    client.sendLine("[P_TILE]|4||0|0|1|0:5|blankpurpl|0|0|0|0:7940010")
    client.sendLine("[P_TILE]|5||0|0|1|0:6|blankwhite|0|0|0|0:7940011")
    client.sendLine("[P_PHYSICS]|0|0|0|0|0|0|0|1")
    client.sendLine("[P_ASSETSCOMPLETE]|"+str(client.PID))

@Instance.register("/place_ready")
def versionhandler(client, arg):
    print(client)
    client.sendLine("[O_HERE]|4|0:1|5|2.5|0|1|0|0|0||0:1|0|1|0")
    client.sendLine("[P_CAMERA]|4.48438|2.48438|0|0|1")
    client.sendLine("[P_ZOOM]|1.000000")
    client.sendLine("[P_LOCKZOOM]|1")
    client.sendLine("[P_LOCKCAMERA]|1")
    client.sendLine("[O_PLAYER]|4|")


def load_sprites(client):
    client.sendLine("[S_LOADSPRITE]|0:100307")
    client.sendLine("[S_LOADSPRITE]|0:100319")
    client.sendLine("[S_LOADSPRITE]|0:100303")
    client.sendLine("[S_LOADSPRITE]|0:100308")
    client.sendLine("[S_LOADSPRITE]|0:100318")
    client.sendLine("[S_LOADSPRITE]|0:100306")
    client.sendLine("[S_LOADSPRITE]|0:100310")
    client.sendLine("[S_LOADSPRITE]|0:100312")
    client.sendLine("[S_LOADSPRITE]|0:100315")
    client.sendLine("[S_LOADSPRITE]|0:100316")
    client.sendLine("[S_LOADSPRITE]|0:100317")
    client.sendLine("[S_LOADSPRITE]|0:100313")
    client.sendLine("[S_LOADSPRITE]|0:100314")
    client.sendLine("[S_LOADSPRITE]|0:100302")
    client.sendLine("[S_LOADSPRITE]|0:100299")
    client.sendLine("[S_LOADSPRITE]|0:100240")
    client.sendLine("[S_LOADSPRITE]|0:100241")
    client.sendLine("[S_LOADSPRITE]|0:100309")
    client.sendLine("[S_LOADSPRITE]|0:100320")
    client.sendLine("[S_LOADSPRITE]|0:100304")
    client.sendLine("[S_LOADSPRITE]|0:1840011")
    client.sendLine("[S_LOADSPRITE]|0:1840012")
    client.sendLine("[S_LOADSPRITE]|0:1840010")
